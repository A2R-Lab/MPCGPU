#include <admm_outer.cuh>
#include <limits>

using namespace std;

int main(){
	/*
	H = np.array([[6, 2, 1], [2, 5, 2], [1, 2, 4]])
	g = np.array([[-8], [-3], [-3]])
	A = np.array([[1, 0, 1], [0, 1, 1], [1, 0, 0], [0, 1, 0], [0, 0, 1]])
	l = np.array([[3], [0], [-10], [-10], [-10]])
	u = np.array([[3], [0], [np.inf], [np.inf], [np.inf]])
	*/
	// int nx = 2;
	// int nc = 1;
	// int knot_points = 3;

	int n = 50;
	float H[n*n] = {0.01, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.001, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.001, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.01, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.001};
	float g[n] = {0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0};
	float A[n*n] = {-0.014096104200563044, 0.03305032431709539, -0.2819220840112506, 0.6610064863419078, 0.0, 0.0, 0.0, 0.0, 0.0, -1.0, -0.0, -0.0, -0.0, 1.0144114130848487, -0.00906246650718493, 0.2882282616969754, -0.1812493301436986, 0.0, -0.0, -1.0, -0.0, -0.0, -0.0044150477855517236, 1.0185940899343187, -0.08830095571103272, 0.3718817986863749, 0.0, -0.0, -0.0, -1.0, -0.0, 0.049761016073693244, 0.0009564870946969959, 0.9952203214738395, 0.019129741893939917, 0.0, -0.0, -0.0, -0.0, -1.0, 0.0011888580307785712, 0.047624672065006424, 0.02377716061557324, 0.9524934413001284, 0.0, 0.0, 0.0, 0.0, 0.0, -0.014096104200563044, 0.03305032431709539, -0.2819220840112506, 0.6610064863419078, 0.0, 0.0, 0.0, 0.0, 0.0, -1.0, -0.0, -0.0, -0.0, 1.0144114130848487, 0.0, 0.0, 0.0, 0.0, -0.0, -1.0, -0.0, -0.0, -0.0044150477855517236, 0.0, 0.0, 0.0, 0.0, -0.0, -0.0, -1.0, -0.0, 0.049761016073693244};
	float l[n] = {-0.10144114130848488, 0.000906246650718493, -0.028822826169697544, 0.01812493301436986, 0.0, 0.0, 0.0, 0.0, 0.0};
	float u[n] = {-0.10144114130848488, 0.000906246650718493, -0.028822826169697544, 0.01812493301436986, 0.0, 0.0, 0.0, 0.0, 0.0};

	float x[n];
	float z[n];
	float lambda[n];

	for(int i=0; i<n;i++){
		x[i] = 0.0;
		z[i] = 0.0;
		lambda[i] = 0.0;
	}
	float rho = 2;

	float sigma = 1e-6;
	float tol=5e-4;
	int max_iter = 4000;

	admm_solve_outer(H, g, A, l, u, x, lambda, z, rho, sigma, tol, max_iter);
	
	std::cout << "x: ";
	for(int i=0; i<n; i++){
		std::cout << x[i] << " ";
	}
	std::cout << "\n\n";
	std::cout << "lambda: ";
	for(int i=0; i<n; i++){
		std::cout << lambda[i] << " ";
	}

	std::cout << "\n\n";
	std::cout << "z: ";
	for(int i=0; i<n; i++){
		std::cout << z[i] << " ";
	}

	std::cout << "\n\n";

}