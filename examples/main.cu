#include <admm_outer.cuh>
#include <limits>

using namespace std;

int main(){
	/*
	H = np.array([[6, 2, 1], [2, 5, 2], [1, 2, 4]])
	g = np.array([[-8], [-3], [-3]])
	A = np.array([[1, 0, 1], [0, 1, 1], [1, 0, 0], [0, 1, 0], [0, 0, 1]])
	l = np.array([[3], [0], [-10], [-10], [-10]])
	u = np.array([[3], [0], [np.inf], [np.inf], [np.inf]])
	*/
	// int nx = 2;
	// int nc = 1;
	// int knot_points = 3;

	float H[9*9] = {1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0};
	float g[9] = {0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0};
	float A[9*9] = {0.2655115856921195, 0.10854852571496944, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, -1.0, -0.0, -0.748596987524897, 0.44432461027331926, 0.0, 0.0, 0.0, 0.0, 0.0, -0.0, -1.0, 0.44432461027331926, 0.6858482980992021, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.2655115856921195, 0.10854852571496944, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, -1.0, -0.0, -0.748596987524897, 0.44432461027331926, 0.0, 0.0, 0.0, 0.0, 0.0, -0.0, -1.0, 0.44432461027331926, 0.6858482980992021, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.2655115856921195, 0.10854852571496944, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, -1.0, -0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.0, -1.0, 0.0, 0.0, 0.0};
	float l[9] = {-2.2462396753487175, -3.53040504040119, 0.0, 0.0, 0.0, 0.0, -1.0, -1.0, -1.0};
	float u[9] = {-2.2462396753487175, -3.53040504040119, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0};

	float x[9] = {0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0};
	float z[9] = {0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0};
	float lambda[9] = {0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0};
	float rho = 0.1;

	float sigma = 1e-6;
	float tol = 1e-3;
	int max_iter = 100;

	admm_solve_outer(H, g, A, l, u, x, lambda, z, rho, sigma, tol, max_iter);
	
	std::cout << "x: ";
	for(int i=0; i<9; i++){
		std::cout << x[i] << " ";
	}
	std::cout << "\n\n";
	std::cout << "lambda: ";
	for(int i=0; i<9; i++){
		std::cout << lambda[i] << " ";
	}

	std::cout << "\n\n";
	std::cout << "z: ";
	for(int i=0; i<9; i++){
		std::cout << z[i] << " ";
	}

	std::cout << "\n\n";

}